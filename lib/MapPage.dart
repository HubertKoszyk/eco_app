import 'dart:convert';
import 'package:eco_app_2/alertdialog.dart';
import 'package:flutter/material.dart';
import 'package:google_maps_flutter/google_maps_flutter.dart';
import 'package:http/http.dart' as http;
import 'package:shared_preferences/shared_preferences.dart';

class MapPage extends StatefulWidget {
  const MapPage({super.key});

  @override
  State<MapPage> createState() => _MapPageState();
}

class _MapPageState extends State<MapPage> {
  static const LatLng _defaultLocation = LatLng(52.2297, 21.0122); // Warszawa
  final Set<Marker> _markers = {};
  final TextEditingController _searchController = TextEditingController();
  List<String> _filteredCities = [];
  GoogleMapController? _mapController;
  String? _selectedCity;
  int? _selectedAQI;
  String? _selectedDescription;

  // Lista miast z ich współrzędnymi
  final Map<String, LatLng> _cities = {
"Warszawa": const LatLng(52.2297, 21.0122),
    "Kraków": const LatLng(50.0647, 19.9450),
    "Wrocław": const LatLng(51.1079, 17.0385),
    "Poznań": const LatLng(52.4084, 16.9342),
    "Gdańsk": const LatLng(54.3520, 18.6466),
    "Łódź": const LatLng(51.7592, 19.4586),
    "Szczecin": const LatLng(53.4285, 14.5528),
    "Bydgoszcz": const LatLng(53.1235, 18.0084),
    "Lublin": const LatLng(51.2465, 22.5752),
    "Katowice": const LatLng(50.2649, 19.0239),
    "Adamówka": const LatLng(50.256813, 22.695780),
    "Aleksandrów Kujawski": const LatLng(52.877193, 18.692846),
    "Aleksandrów Łódzki": const LatLng(51.819396, 19.303811),
    "Alwernia": const LatLng(50.066067, 19.542792),
    "Andrychów": const LatLng(49.854887, 19.338387),
    "Augustów": const LatLng(53.842070, 22.977307),
    "Babimost": const LatLng(52.164832, 15.827674),
    "Baborów": const LatLng(50.157400, 17.985148),
    "Baranów Sandomierski": const LatLng(50.499912, 21.541494),
    "Barcin": const LatLng(52.857758, 17.941876),
    "Barczewo": const LatLng(53.828162, 20.690152),
    "Bardo": const LatLng(50.505892, 16.739914),
    "Barlinek": const LatLng(52.994340, 15.219131),
    "Bartoszyce": const LatLng(54.251418, 20.809817),
    "Barwice": const LatLng(53.744689, 16.355411),
    "Bełchatów": const LatLng(51.364403, 19.369946),
    "Bełżyce": const LatLng(51.173918, 22.279858),
    "Będzin": const LatLng(50.325499, 19.125336),
    "Biała (opolskie)": const LatLng(50.386379, 17.660530),
    "Biała Piska  ": const LatLng(53.610217, 22.062123),
    "Biała Podlaska": const LatLng(52.033721, 23.120036),
    "Biała Rawska": const LatLng(51.807796, 20.472659),
    "Białaczów": const LatLng(51.298097, 20.296452),
    "Białobrzegi (radomskie)": const LatLng(51.647251, 20.951605),
    "Białogard": const LatLng(54.004955, 15.990838),
    "Biały Bór": const LatLng(53.897299, 16.835040),
    "Białystok": const LatLng(53.132220, 23.168782),
    "Biecz": const LatLng(49.735446, 21.263163),
    "Bielawa": const LatLng(50.690295, 16.622329),
    "Bielsk Podlaski": const LatLng(52.765214, 23.186790),
    "Bielsko-Biała": const LatLng(49.822227, 19.058344),
    "Bierutów": const LatLng(51.125447, 17.547534),
    "Bieżuń": const LatLng(52.962463, 19.890396),
    "Biłgoraj": const LatLng(50.540865, 22.721902),
    "Bircza": const LatLng(49.692262, 22.485493),
    "Bisztynek": const LatLng(54.085931, 20.903689),
    "Blachownia": const LatLng(50.784890, 18.962264),
    "Błaszki": const LatLng(51.651598, 18.434308),
    "Błażowa": const LatLng(49.885496, 22.102697),
    "Błonie": const LatLng(52.198491, 20.617174),
    "Bobolice": const LatLng(53.954676, 16.587634),
    "Bobowa": const LatLng(49.710175, 20.950814),
    "Bochnia": const LatLng(49.968757, 20.430350),
    "Bodzentyn": const LatLng(50.940944, 20.957535),
    "Bogatynia": const LatLng(50.907097, 14.956164),
    "Bogoria": const LatLng(50.651404, 21.260442),
    "Boguchwała": const LatLng(49.984563, 21.944872),
    "Boguszów-Gorce": const LatLng(50.755895, 16.203657),
    "Bojanowo": const LatLng(51.707518, 16.748513),
    "Bolesławiec (jeleniog.)": const LatLng(51.265631, 15.565999),
    "Bolimów": const LatLng(52.076301, 20.163648),
    "Bolków": const LatLng(50.924413, 16.103842),
    "Borek Wielkopolski": const LatLng(51.916650, 17.240914),
    "Braniewo": const LatLng(54.379477, 19.819992),
    "Brańsk": const LatLng(52.743185, 22.841272),
    "Brodnica (toruńskie)": const LatLng(53.259828442694314, 19.395752401898775),
    "Brody (zielonogórskie)": const LatLng(51.790460, 14.773803),
    "Brok": const LatLng(52.697381, 21.846603),
    "Brusy": const LatLng(53.886452, 17.719049),
    "Brwinów": const LatLng(52.142339, 20.717065),
    "Brzeg": const LatLng(50.860739, 17.466896),
    "Brzeg Dolny": const LatLng(51.272798, 16.708536),
    "Brzesko": const LatLng(49.964618, 20.603346),
    "Brzeszcze": const LatLng(49.981196, 19.152751),
    "Brześć Kujawski": const LatLng(52.606155, 18.901149),
    "Brzostek": const LatLng(49.879543, 21.411028),
    "Brzozów": const LatLng(49.694252, 22.019034),
    "Budzyń": const LatLng(52.890628, 16.988377),
    "Buk": const LatLng(52.355303, 16.519700),
    "Bukowno": const LatLng(50.265133, 19.444903),
    "Busko Zdrój": const LatLng(50.470689, 20.719034),
    "Bychawa": const LatLng(51.013586, 22.530119),
    "Byczyna": const LatLng(51.113199, 18.210733),
    "Bystrzyca Kłodzka": const LatLng(50.296653, 16.651671),
    "Bytom": const LatLng(50.348371, 18.914808),
    "Bytom Odrzański": const LatLng(51.731133, 15.822455),
    "Bytów": const LatLng(54.170472, 17.491590),
    "Cedynia": const LatLng(52.879226, 14.202024),
    "Cegłów": const LatLng(52.146990, 21.737728),
    "Chełm": const LatLng(51.143318, 23.471121),
    "Chełmek": const LatLng(50.099963, 19.248079),
    "Chełmno": const LatLng(53.348386, 18.425082),
    "Chełmża": const LatLng(53.184324, 18.604154),
    "Chęciny": const LatLng(50.801490, 20.464620),
    "Chmielnik": const LatLng(50.614181, 20.751700),
    "Chocianów": const LatLng(51.417278, 15.903967),
    "Chociwel": const LatLng(53.466688, 15.333069),
    "Chocz": const LatLng(51.975720, 17.869621),
    "Chodecz": const LatLng(52.404955, 19.027389),
    "Chodzież": const LatLng(52.995176, 16.918865),
    "Chojna": const LatLng(52.963618, 14.427425),
    "Chojnice": const LatLng(53.694208, 17.556424),
    "Chojnów": const LatLng(51.273042, 15.936217),
    "Choreszcz": const LatLng(53.142594, 22.987641),
    "Choroszcz": const LatLng(53.142613, 22.987621),
    "Chorzele": const LatLng(53.259781, 20.896994),
    "Chorzów": const LatLng(50.293695, 18.954597),
    "Choszczno": const LatLng(53.169095, 15.419726),
    "Chrzanów (katowickie)": const LatLng(50.135299, 19.401880),
    "Ciechanowiec": const LatLng(52.678084, 22.497824),
    "Ciechanów": const LatLng(52.881346, 20.619751),
    "Ciechocinek": const LatLng(52.878877, 18.794795),
    "Ciepielów": const LatLng(51.248458, 21.575048),
    "Ciepłowody": const LatLng(50.674482, 16.909146),
    "Cieszanów": const LatLng(50.244302, 23.131396),
    "Cieszyn": const LatLng(49.750030, 18.634835),
    "Ciężkowice": const LatLng(49.785395, 20.973288),
    "Cybinka": const LatLng(52.194744, 14.794153),
    "Czaplinek": const LatLng(53.557778, 16.233083),
    "Czarna Białostocka": const LatLng(53.301863, 23.287406),
    "Czarne": const LatLng(53.683807, 16.937949),
    "Czarnków": const LatLng(52.905030, 16.565564),
    "Czarny Dunajec": const LatLng(49.446311, 19.839922),
    "Czchów": const LatLng(49.837069, 20.679808),
    "Czechowice-Dziedzice": const LatLng(49.901311, 18.991943),
    "Czemierniki": const LatLng(51.672436, 22.639334),
    "Czempiń": const LatLng(52.142526, 16.758089),
    "Czerniejewo": const LatLng(52.426040, 17.489144),
    "Czersk": const LatLng(53.795595, 17.974144),
    "Czerwieńsk": const LatLng(52.013651, 15.419736),
    "Czerwińsk nad Wisłą": const LatLng(52.397180, 20.308710),
    "Częstochowa": const LatLng(50.810922, 19.118292),
    "Człopa": const LatLng(53.087995, 16.120288),
    "Człuchów": const LatLng(53.667269, 17.357961),
    "Ćmielów": const LatLng(50.890495, 21.513631),
    "Daleszyce": const LatLng(50.801799, 20.807222),
    "Darłowo": const LatLng(54.421410, 16.408533),
    "Dąbie (konińskie)": const LatLng(52.087101, 18.821707),
    "Dąbrowa Białostocka": const LatLng(53.653055, 23.346906),
    "Dąbrowa Górnicza": const LatLng(50.325478, 19.186671),
    "Dąbrowa Tarnowska": const LatLng(50.172474, 20.983360),
    "Dąbrowice": const LatLng(52.311224, 19.084457),
    "Debrzno": const LatLng(53.537834, 17.236149),
    "Dębica": const LatLng(50.051097, 21.411040),
    "Dęblin": const LatLng(51.562054, 21.863677),
    "Dębno (gorzowskie)": const LatLng(52.738648, 14.697260),
    "Dobczyce": const LatLng(49.881117, 20.089513),
    "Dobiegniew": const LatLng(52.970115, 15.752912),
    "Dobra (konińskie)": const LatLng(51.915269, 18.614480),
    "Dobre Miasto": const LatLng(53.986587, 20.396563),
    "Dobrodzień": const LatLng(50.728524, 18.445094),
    "Dobrzany": const LatLng(53.358327, 15.429123),
    "Dobrzyca": const LatLng(51.863296, 17.601164),
    "Dobrzyń nad Wisłą": const LatLng(52.637428, 19.319304),
    "Dolsk": const LatLng(51.981836, 17.062518),
    "Drawno": const LatLng(53.219548, 15.758657),
    "Drawsko Pomorskie": const LatLng(53.531977, 15.813658),
    "Drezdenko": const LatLng(52.837312, 15.831064),
    "Drobin": const LatLng(52.737426, 19.990867),
    "Drohiczyn": const LatLng(52.400546, 22.657625),
    "Drzewica": const LatLng(51.450402, 20.477155),
    "Dubiecko": const LatLng(49.827767, 22.392859),
    "Dukla": const LatLng(49.555391, 21.683115),
    "Duszniki-Zdrój": const LatLng(50.404036, 16.390477),
    "Dynów": const LatLng(49.814740, 22.232013),
    "Działdowo": const LatLng(53.236246, 20.178735),
    "Działoszyce": const LatLng(50.365506, 20.351797),
    "Działoszyn": const LatLng(51.116905, 18.865418),
    "Dzierzgoń": const LatLng(53.921670, 19.347002),
    "Dzierżoniów": const LatLng(50.731205, 16.655477),
    "Dziwnów": const LatLng(54.021974, 14.744121),
    "Elbląg": const LatLng(54.155979, 19.403031),
    "Ełk": const LatLng(53.827945, 22.363872),
    "Frampol": const LatLng(50.671620, 22.670360),
    "Frombork": const LatLng(54.357836, 19.682838),
    "Garwolin": const LatLng(51.896877, 21.613703),
    "Gąbin": const LatLng(52.398254, 19.734053),
    "Gąsawa": const LatLng(52.767227, 17.755214),
    "Gdynia": const LatLng(54.517732, 18.530825),
    "Gielniów": const LatLng(51.400396, 20.480182),
    "Giżycko": const LatLng(54.036072, 21.767168),
    "Glinojeck": const LatLng(52.818161, 20.284648),
    "Gliwice": const LatLng(50.299875, 18.672537),
    "Głogów": const LatLng(51.662254, 16.084420),
    "Głogów Malopolski": const LatLng(50.146075, 21.962120),
    "Głogówek": const LatLng(50.353243, 17.864163),
    "Głowaczów": const LatLng(51.622951, 21.317320),
    "Głowno": const LatLng(51.964008, 19.715117),
    "Głubczyce": const LatLng(50.200039, 17.828959),
    "Głuchołazy": const LatLng(50.315474, 17.382269),
    "Głuszyca": const LatLng(50.686946, 16.371423),
    "Gniew": const LatLng(53.835283, 18.822063),
    "Gniewkowo": const LatLng(52.895190, 18.403959),
    "Gniezno": const LatLng(52.533025, 17.582514),
    "Gogolin": const LatLng(50.491920, 18.020887),
    "Golczewo": const LatLng(53.823698, 14.978018),
    "Goleniów": const LatLng(53.563354, 14.827548),
    "Golina": const LatLng(52.242834, 18.094089),
    "Golub-Dobrzyń": const LatLng(53.110066, 19.054137),
    "Gołańcz": const LatLng(52.944533, 17.301042),
    "Gołdap": const LatLng(54.306017, 22.303892),
    "Goniądz": const LatLng(53.489675, 22.731228),
    "Goraj": const LatLng(50.720709, 22.667942),
    "Gorlice": const LatLng(49.655357, 21.159855),
    "Gorzów Śląski": const LatLng(51.028678, 18.419365),
    "Gorzów Wielkopolski": const LatLng(52.731253, 15.237890),
    "Gostynin": const LatLng(52.428053, 19.460604),
    "Gostyń": const LatLng(51.877649, 17.011295),
    "Gościno": const LatLng(54.052995, 15.650841),
    "Gowarczów": const LatLng(51.279031, 20.437880),
    "Gozdnica": const LatLng(51.436979, 15.098571),
    "Góra": const LatLng(51.670437, 16.535689),
    "Góra Kalwaria": const LatLng(51.982108, 21.211537),
    "Górowo Iławieckie": const LatLng(54.285889, 20.491899),
    "Górzno (toruńskie)": const LatLng(53.197699, 19.643790),
    "Grabów": const LatLng(52.127126, 18.999584),
    "Grabów nad Prosną": const LatLng(51.508098, 18.116002),
    "Grajewo": const LatLng(53.646282, 22.454705),
    "Grodków": const LatLng(50.696804, 17.381757),
    "Grodzisk Mazowiecki     ": const LatLng(52.105481, 20.633286),
    "Grodzisk Wielkopolski": const LatLng(52.227256, 16.364735),
    "Grójec": const LatLng(51.866520, 20.866283),
    "Grudziądz": const LatLng(53.482313, 18.752487),
    "Grybów": const LatLng(49.623881, 20.948081),
    "Gryfice": const LatLng(53.916007, 15.199598),
    "Gryfino": const LatLng(53.251108, 14.487727),
    "Gryfów Śląski           ": const LatLng(51.030657, 15.413771),
    "Gubin": const LatLng(51.949248, 14.724622),
    "Hajnówka": const LatLng(52.740192, 23.581114),
    "Halinów": const LatLng(52.225630, 21.358322),
    "Hel": const LatLng(54.609096, 18.801200),
    "Hrubieszów": const LatLng(50.804484, 23.891631),
    "Iława": const LatLng(53.594355, 19.568019),
    "Iłowa": const LatLng(51.500736, 15.199809),
    "Iłża": const LatLng(51.163517, 21.238516),
    "Inowłódz": const LatLng(51.521571, 20.223872),
    "Inowrocław": const LatLng(52.797778, 18.255003),
    "Ińsko": const LatLng(53.436648, 15.549750),
    "Iwaniska": const LatLng(50.731203, 21.278230),
    "Iwonicz-Zdrój": const LatLng(49.563732, 21.791236),
    "Izbica Kujawska": const LatLng(52.419823, 18.762202),
    "Jabłonowo Pomorskie": const LatLng(53.389304, 19.154431),
    "Jadów": const LatLng(52.478349, 21.629159),
    "Janikowo": const LatLng(52.753407, 18.109760),
    "Janowiec": const LatLng(52.756808, 17.487871),
    "Janowiec Wielkopolski": const LatLng(52.756782, 17.488000),
    "Janów Lubelski": const LatLng(50.705564, 22.412781),
    "Jaraczewo": const LatLng(51.968031, 17.296625),
    "Jarocin (kaliskie)": const LatLng(51.971523, 17.505827),
    "Jarosław": const LatLng(50.016460, 22.679502),
    "Jasień": const LatLng(51.750875, 15.014325),
    "Jasło": const LatLng(49.743712, 21.473583),
    "Jastarnia": const LatLng(54.703985, 18.661489),
    "Jastrowie": const LatLng(53.422446, 16.818639),
    "Jastrząb": const LatLng(51.245790, 20.942375),
    "Jastrzębie-Zdrój": const LatLng(49.954196, 18.597319),
    "Jawor": const LatLng(51.056350, 16.185949),
    "Jawornik Polski": const LatLng(49.889648, 22.286275),
    "Jaworzno": const LatLng(50.202792, 19.262879),
    "Jaworzyna Śląska": const LatLng(50.912563, 16.430219),
    "Jedlicze": const LatLng(49.712785, 21.641677),
    "Jedlina-Zdrój": const LatLng(50.720038, 16.344174),
    "Jedlnia-Letnisko": const LatLng(51.428445, 21.326139),
    "Jedwabne": const LatLng(53.285454, 22.304038),
    "Jelcz-Laskowice": const LatLng(51.019922, 17.313356),
    "Jelenia Góra": const LatLng(50.900854, 15.732265),
    "Jeziorany": const LatLng(53.976400, 20.745910),
    "Jeżów": const LatLng(51.814985, 19.969263),
    "Jędrzejów": const LatLng(50.639269, 20.299003),
    "Jordanów": const LatLng(49.649273, 19.828523),
    "Józefów (lubelskie)": const LatLng(50.481364, 23.052917),
    "Józefów (warszawskie)": const LatLng(50.481364, 23.052917),
    "Jutrosin": const LatLng(51.651255, 17.169482),
    "Kaczory": const LatLng(53.103408, 16.881904),
    "Kalety": const LatLng(50.567236, 18.880279),
    "Kalisz": const LatLng(51.763570, 18.078289),
    "Kalisz Pomorski": const LatLng(53.297248, 15.904877),
    "Kalwaria Zebrzydowska": const LatLng(49.867843, 19.675589),
    "Kałuszyn": const LatLng(52.207503, 21.809989),
    "Kamieniec Ząbkowicki": const LatLng(50.524094, 16.876886),
    "Kamienna Góra": const LatLng(50.783710, 16.036091),
    "Kamień Krajeński": const LatLng(53.533571, 17.518504),
    "Kamień Pomorski": const LatLng(53.968341, 14.776772),
    "Kamieńsk": const LatLng(51.203383, 19.498457),
    "Kamionka": const LatLng(51.469989, 22.461335),
    "Kańczuga": const LatLng(49.980796, 22.411199),
    "Karczew": const LatLng(52.077012, 21.245020),
    "Kargowa": const LatLng(52.071177, 15.859619),
    "Karlino": const LatLng(54.041490, 15.882250),
    "Karpacz": const LatLng(50.773850, 15.753177),
    "Kartuzy": const LatLng(54.332615, 18.198021),
    "Kazimierz Dolny": const LatLng(51.319733, 21.951332),
    "Kazimierza Wielka": const LatLng(50.267919, 20.489149),
    "Kąty Wrocławskie": const LatLng(51.030558, 16.762913),
    "Kcynia": const LatLng(52.991475, 17.486502),
    "Kędzierzyn-Koźle": const LatLng(50.339650, 18.191929),
    "Kępice": const LatLng(54.238301, 16.889884),
    "Kępno": const LatLng(51.279082, 17.985634),
    "Kętrzyn": const LatLng(54.076527, 21.372239),
    "Kęty": const LatLng(49.882390, 19.217511),
    "Kielce": const LatLng(50.866297, 20.613855),
    "Kiernozia": const LatLng(52.267303, 19.871570),
    "Kietrz": const LatLng(50.079289, 17.999874),
    "Kikół": const LatLng(52.912185, 19.116388),
    "Kisielice": const LatLng(53.608032, 19.261318),
    "Kleczew": const LatLng(52.369197, 18.177722),
    "Kleszczele": const LatLng(52.573519, 23.325728),
    "Klimontów": const LatLng(50.657392, 21.446888),
    "Kluczbork": const LatLng(50.973461, 18.213561),
    "Kłecko": const LatLng(52.630914, 17.426694),
    "Kłobuck": const LatLng(50.904282, 18.925663),
    "Kłodawa (konińskie)": const LatLng(52.253296, 18.912964),
    "Kłodzko": const LatLng(50.435763, 16.655567),
    "Knurów": const LatLng(50.220180, 18.666226),
    "Knyszyn": const LatLng(53.311671, 22.912091),
    "Kobyla Góra": const LatLng(51.380053, 17.836495),
    "Kobylin": const LatLng(51.715312, 17.226714),
    "Kobyłka": const LatLng(52.338651, 21.190024),
    "Kock": const LatLng(51.640523, 22.440974),
    "Kolbuszowa": const LatLng(50.240625, 21.772968),
    "Kolno (olsztyńskie)": const LatLng(53.409604, 21.930473),
    "Kolonowskie": const LatLng(50.650853, 18.382125),
    "Koluszki": const LatLng(51.741660, 19.816560),
    "Kołaczyce": const LatLng(49.809660, 21.433514),
    "Koło": const LatLng(52.200160, 18.634715),
    "Kołobrzeg": const LatLng(54.177578, 15.561800),
    "Koniecpol": const LatLng(50.775891, 19.688480),
    "Konin": const LatLng(52.228977, 18.245139),
    "Konstancin-Jeziorna": const LatLng(52.093042, 21.118140),
    "Konstantynów Łódzki": const LatLng(51.748767, 19.320933),
    "Końskie": const LatLng(51.190494, 20.397725),
    "Koprzywnica": const LatLng(50.593860, 21.574035),
    "Korfantów": const LatLng(50.488550, 17.594685),
    "Koronowo": const LatLng(53.308139, 17.942156),
    "Korsze": const LatLng(54.168950, 21.138680),
    "Kosów Lacki": const LatLng(52.591846, 22.143234),
    "Kostrzyn (poznańskie)": const LatLng(52.397997, 17.224945),
    "Kostrzyn (gorzowskie)": const LatLng(52.592055, 14.643791),
    "Koszalin": const LatLng(54.190281, 16.183377),
    "Koszyce": const LatLng(50.167979, 20.577096),
    "Kościan": const LatLng(52.081297, 16.645595),
    "Kościerzyna": const LatLng(54.118560, 17.976392),
    "Kowal": const LatLng(52.529261, 19.147897),
    "Kowalewo Pomorskie": const LatLng(53.155606, 18.892745),
    "Kozienice": const LatLng(51.585241, 21.545354),
    "Koźmin": const LatLng(51.827546, 17.449094),
    "Koźminek": const LatLng(51.796724, 18.334663),
    "Kożuchow": const LatLng(51.744875, 15.591464),
    "Kórnik": const LatLng(52.250140, 17.085781),
    "Krajenka": const LatLng(53.294495, 16.988876),
    "Krapkowice": const LatLng(50.482660, 17.975733),
    "Krasnobród": const LatLng(50.543557, 23.209356),
    "Krasnystaw": const LatLng(50.984966, 23.162752),
    "Kraśnik": const LatLng(50.934789, 22.215194),
    "Krobia": const LatLng(51.774003, 16.979353),
    "Krosno": const LatLng(49.687379, 21.755182),
    "Krosno Odrzańskie": const LatLng(52.053971, 15.100693),
    "Krośniewice": const LatLng(52.255045, 19.170152),
    "Krotoszyn": const LatLng(51.694833, 17.429841),
    "Kruszwica": const LatLng(52.673722, 18.321254),
    "Krynica": const LatLng(49.406391, 20.953210),
    "Krynki": const LatLng(53.262623, 23.769612),
    "Krzanowice": const LatLng(50.017896, 18.121406),
    "Krzepice": const LatLng(50.971487, 18.728819),
    "Krzeszowice": const LatLng(50.136364, 19.629475),
    "Krzywiń": const LatLng(51.962337, 16.818960),
    "Książ Wielki": const LatLng(50.441246, 20.138589),
    "Książ Wielkopolski": const LatLng(52.059878, 17.239001),
    "Kudowa-Zdrój": const LatLng(50.433986, 16.235599),
    "Kunów": const LatLng(50.957107, 21.279214),
    "Kutno": const LatLng(52.227217, 19.358942),
    "Kuźnia Raciborska": const LatLng(50.202238, 18.309320),
    "Kwidzyn": const LatLng(53.723709, 18.931035),
    "Latowicz": const LatLng(52.025313, 21.804308),
    "Lądek-Zdrój": const LatLng(50.344700, 16.876453),
    "Legionowo": const LatLng(52.405525, 20.935795),
    "Legnica": const LatLng(51.205218, 16.156858),
    "Leszno": const LatLng(51.840660, 16.569470),
    "Lesznowola": const LatLng(51.025989, 15.263460),
    "Leśna": const LatLng(51.026151, 15.263546),
    "Leśnica": const LatLng(50.428845, 18.183119),
    "Lewin Brzeski": const LatLng(50.749993, 17.617870),
    "Leżajsk": const LatLng(50.261411, 22.416041),
    "Lębork": const LatLng(54.535179, 17.744470),
    "Libiąż": const LatLng(50.099082, 19.314557),
    "Lidzbark": const LatLng(53.260408, 19.822007),
    "Lidzbark Warmiński": const LatLng(54.124191, 20.570487),
    "Limanowa": const LatLng(49.707327, 20.420939),
    "Lipiany": const LatLng(53.003999, 14.966421),
    "Lipno": const LatLng(52.842379, 19.176866),
    "Lipsko": const LatLng(51.155959, 21.649899),
    "Lubaczów": const LatLng(50.154435, 23.119553),
    "Lubań": const LatLng(51.119215, 15.285926),
    "Lubartów": const LatLng(51.462772, 22.608396),
    "Lubawa": const LatLng(53.501011, 19.742518),
    "Lubawka": const LatLng(50.703699, 15.999546),
    "Lubień Kujawski": const LatLng(52.406424, 19.160667),
    "Lubin": const LatLng(51.398982, 16.200121),
    "Lubliniec": const LatLng(50.672846, 18.682562),
    "Lubniewice": const LatLng(52.513402, 15.245642),
    "Lubomierz": const LatLng(51.013489, 15.506425),
    "Luboń": const LatLng(52.346582, 16.876508),
    "Lubowidz": const LatLng(53.119871, 19.843416),
    "Lubraniec": const LatLng(52.541683, 18.829902),
    "Lubsko": const LatLng(51.783735, 14.966201),
    "Lubycza Królewska": const LatLng(50.338869, 23.516903),
    "Lutomiersk": const LatLng(51.757249, 19.206777),
    "Lututów": const LatLng(51.373044, 18.434675),
    "Lwówek": const LatLng(52.446967, 16.179813),
    "Lwówek Śląski": const LatLng(51.109126, 15.581195),
    "Łabiszyn": const LatLng(52.950267, 17.917080),
    "Łagów (kieleckie)": const LatLng(50.776164, 21.079030),
    "Łańcut": const LatLng(50.069557, 22.223497),
    "Łapy": const LatLng(52.986442, 22.874435),
    "Łasin": const LatLng(53.517823, 19.088817),
    "Łask": const LatLng(51.590323, 19.138527),
    "Łaskarzew": const LatLng(51.790922, 21.592157),
    "Łaszczów": const LatLng(50.530227, 23.715779),
    "Łaziska": const LatLng(50.140845, 18.839996),
    "Łazy": const LatLng(50.428605, 19.391228),
    "Łeba": const LatLng(54.758942, 17.554769),
    "Łęczna": const LatLng(51.302693, 22.877625),
    "Łęczyca": const LatLng(52.053650, 19.190441),
    "Łęknica": const LatLng(51.538128, 14.737352),
    "Łobez": const LatLng(53.637709, 15.620373),
    "Łobżenica": const LatLng(53.260782, 17.255576),
    "Łochów": const LatLng(52.528141, 21.686236),
    "Łomianki": const LatLng(52.334745, 20.883699),
    "Łomża": const LatLng(53.171350, 22.050808),
    "Łopuszno": const LatLng(50.946307, 20.249077),
    "Łosice": const LatLng(52.208997, 22.716965),
    "Łowicz": const LatLng(52.104917, 19.939553),
    "Łuków": const LatLng(51.927148, 22.377527),
    "Maciejowice": const LatLng(51.693621, 21.555021),
    "Magnuszew": const LatLng(51.761300, 21.383295),
    "Maków Mazowiecki": const LatLng(52.862067, 21.099456),
    "Maków Podhalański": const LatLng(49.729875, 19.672300),
    "Malbork": const LatLng(54.031323, 19.022378),
    "Małogoszcz": const LatLng(50.811380, 20.263649),
    "Małomice": const LatLng(51.554115, 15.447328),
    "Margonin": const LatLng(52.972291, 17.092484),
    "Marki": const LatLng(52.328710, 21.109152),
    "Miastko": const LatLng(54.001945, 16.974341),
    "Michałowo": const LatLng(53.033877, 23.605488),
    "Miechów": const LatLng(50.356353, 20.026826),
    "Miejska Górka": const LatLng(51.651372, 16.953968),
    "Mielec": const LatLng(50.290243, 21.430790),
    "Mielno": const LatLng(54.260909, 16.056025),
    "Mieroszów": const LatLng(50.663935, 16.188300),
    "Mieszkowice": const LatLng(52.788191, 14.488701),
    "Mieścisko": const LatLng(52.743598, 17.326284),
    "Międzybórz": const LatLng(51.398935, 17.666494),
    "Międzychód": const LatLng(52.597760, 15.893299),
    "Międzylesie": const LatLng(50.148099, 16.663716),
    "Międzyrzecz": const LatLng(52.445607, 15.578083),
    "Międzyrzecz Podlaski": const LatLng(51.980587, 22.781352),
    "Międzyzdroje": const LatLng(53.925645, 14.442448),
    "Miękinia": const LatLng(51.193251, 16.737748),
    "Mikołów": const LatLng(50.177572, 18.891067),
    "Mikstat": const LatLng(51.532942, 17.973039),
    "Milanówek": const LatLng(52.124108, 20.664673),
    "Milicz": const LatLng(51.525576, 17.272137),
    "Miłakowo": const LatLng(54.007968, 20.068595),
    "Miłomłyn": const LatLng(53.764317, 19.831766),
    "Miłosław": const LatLng(52.203721, 17.485406),
    "Mińsk Mazowiecki        ": const LatLng(52.180822, 21.561888),
    "Mirosławiec": const LatLng(53.341747, 16.084187),
    "Mirsk": const LatLng(50.972399, 15.384234),
    "Mława": const LatLng(53.121152, 20.367512),
    "Młynary": const LatLng(54.187096, 19.722557),
    "Modliborzyce": const LatLng(50.753214, 22.329447),
    "Mogielnica": const LatLng(51.693007, 20.721572),
    "Mogilno": const LatLng(52.657738, 17.949891),
    "Mońki": const LatLng(53.404908, 22.792821),
    "Morawica": const LatLng(50.745300, 20.616982),
    "Morąg": const LatLng(53.915376, 19.927186),
    "Mordy": const LatLng(52.212289, 22.513815),
    "Moryń": const LatLng(52.856761, 14.393212),
    "Mosina": const LatLng(52.246880, 16.847073),
    "Mrągowo": const LatLng(53.863363, 21.298144),
    "Mrocza": const LatLng(53.241635, 17.600684),
    "Mrozy": const LatLng(52.167367, 21.802798),
    "Mszana Dolna": const LatLng(49.676082, 20.063726),
    "Mszczonów": const LatLng(51.974052, 20.519129),
    "Murowana Goślina": const LatLng(52.567230, 16.995893),
    "Muszyna": const LatLng(49.353495, 20.894508),
    "Mysłowice": const LatLng(50.204095, 19.156646),
    "Myszków": const LatLng(50.574883, 19.326672),
    "Myszyniec": const LatLng(53.383423, 21.342849),
    "Myślenice": const LatLng(49.833271, 19.932447),
    "Myślibórz": const LatLng(52.922848, 14.861997),
    "Nakło nad Notecią": const LatLng(53.140336, 17.597109),
    "Nałęczów": const LatLng(51.287825, 22.214405),
    "Namysłów": const LatLng(51.073866, 17.721876),
    "Narol": const LatLng(50.347283, 23.327219),
    "Nasielsk": const LatLng(52.591415, 20.799810),
    "Nekla": const LatLng(52.363476, 17.409476),
    "Nidzica": const LatLng(53.361824, 20.421263),
    "Niemcza": const LatLng(50.717559, 16.833482),
    "Niemodlin": const LatLng(50.639584, 17.628391),
    "Niepołomice": const LatLng(50.033504, 20.212242),
    "Nieszawa": const LatLng(52.834792, 18.891584),
    "Nisko": const LatLng(50.515207, 22.126343),
    "Nowa Dęba": const LatLng(50.414519, 21.751667),
    "Nowa Ruda": const LatLng(50.582628, 16.501654),
    "Nowa Sarzyna": const LatLng(50.321501, 22.342608),
    "Nowa Słupia": const LatLng(50.863226, 21.089039),
    "Nowa Sól": const LatLng(51.802335, 15.712537),
    "Nowe Brzesko": const LatLng(50.129801, 20.371357),
    "Nowe Miasteczko": const LatLng(51.689633, 15.731857),
    "Nowe Miasto": const LatLng(52.661374, 20.627727),
    "Nowe Miasto Lubawskie": const LatLng(53.424816, 19.588945),
    "Nowe Miasto nad Pilicą": const LatLng(51.617693, 20.571896),
    "Nowe Miasto nad Wartą": const LatLng(52.087656, 17.404717),
    "Nowe Skalmierzyce": const LatLng(51.709610, 17.991087),
    "Nowe Warpno": const LatLng(53.723340, 14.285869),
    "Nowogard": const LatLng(53.673465, 15.115400),
    "Nowogrodziec": const LatLng(51.196325, 15.395451),
    "Nowogród": const LatLng(53.223422, 21.875827),
    "Nowogród Bobrzański": const LatLng(51.800724, 15.234493),
    "Nowy Dwór": const LatLng(52.441510, 20.683128),
    "Nowy Dwór Gdański": const LatLng(54.211604, 19.114282),
    "Nowy Dwór Mazowiecki": const LatLng(52.427650, 20.713075),
    "Nowy Korczyn": const LatLng(50.299266, 20.806356),
    "Nowy Sącz": const LatLng(49.608434, 20.699771),
    "Nowy Staw": const LatLng(54.135456, 19.008797),
    "Nowy Targ": const LatLng(49.485703, 20.028491),
    "Nowy Tomyśl": const LatLng(52.314013, 16.129676),
    "Nowy Wiśnicz": const LatLng(49.914489, 20.460402),
    "Nysa": const LatLng(50.471712, 17.333012),
    "Oborniki": const LatLng(52.653317, 16.804798),
    "Oborniki Śląskie": const LatLng(51.298823, 16.911403),
    "Obrzycko": const LatLng(52.705822, 16.528830),
    "Odolanów": const LatLng(51.578109, 17.661935),
    "Odrzywół": const LatLng(51.518403, 20.554510),
    "Ogrodzieniec": const LatLng(50.449316, 19.516466),
    "Okonek": const LatLng(53.534936, 16.850558),
    "Olecko": const LatLng(54.040022, 22.497932),
    "Oleszyce": const LatLng(50.165237, 23.035022),
    "Oleśnica (kieleckie)": const LatLng(50.451989, 21.063127),
    "Oleśnica (wrocławskie)": const LatLng(51.209857, 17.375743),
    "Olkusz": const LatLng(50.285050, 19.547354),
    "Olsztyn": const LatLng(53.776933, 20.465192),
    "Olsztynek": const LatLng(53.587903, 20.283826),
    "Olszyna": const LatLng(51.071268, 15.366238),
    "Oława": const LatLng(50.944143, 17.289051),
    "Opalenica": const LatLng(52.309263, 16.408566),
    "Opatowiec": const LatLng(50.243184, 20.723331),
    "Opatówek": const LatLng(51.739892, 18.210844),
    "Opoczno": const LatLng(51.376162, 20.268795),
    "Opole": const LatLng(50.671385, 17.912815),
    "Opole Lubelskie": const LatLng(51.147297, 21.965825),
    "Orneta": const LatLng(54.115018, 20.125901),
    "Orzesze": const LatLng(50.139641, 18.774002),
    "Orzysz": const LatLng(53.811736, 21.947436),
    "Osieck": const LatLng(51.967137, 21.417971),
    "Osieczna": const LatLng(51.905023, 16.678401),
    "Osjaków": const LatLng(51.288720, 18.791102),
    "Ostrołęka": const LatLng(53.082689, 21.573017),
    "Ostroróg": const LatLng(52.626752, 16.449330),
    "Ostrowiec Świętokrzyski": const LatLng(50.941483, 21.389951),
    "Ostróda": const LatLng(53.701661, 19.961658),
    "Ostrów Lubelski": const LatLng(51.497180, 22.854208),
    "Ostrów Mazowiecka": const LatLng(52.804383, 21.889375),
    "Ostrów Wielkopolski": const LatLng(51.648067, 17.805354),
    "Ostrzeszów": const LatLng(51.425220, 17.929521),
    "Ośno Lubuskie": const LatLng(52.454287, 14.871327),
    "Oświęcim": const LatLng(50.037546, 19.231571),
    "Otmuchów": const LatLng(50.467191, 17.170459),
    "Otwock": const LatLng(52.112175, 21.261882),
    "Otyń": const LatLng(51.849059, 15.705640),
    "Ozimek": const LatLng(50.677989, 18.214001),
    "Ozorków": const LatLng(51.961861, 19.285551),
    "Ożarów": const LatLng(50.889632, 21.666533),
    "Ożarów Mazowiecki": const LatLng(52.212367, 20.796337),
    "Pabianice": const LatLng(51.665095, 19.344523),
    "Pacanów": const LatLng(50.401616, 21.039199),
    "Paczków": const LatLng(50.464901, 17.006215),
    "Pajęczno": const LatLng(51.147870, 18.990191),
    "Pakość": const LatLng(52.807133, 18.084392),
    "Parczew": const LatLng(51.634018, 22.888661),
    "Parzęczew": const LatLng(51.948768, 19.205146),
    "Pasłęk": const LatLng(54.062882, 19.658287),
    "Pelplin": const LatLng(53.927590, 18.696222),
    "Pełczyce": const LatLng(53.044661, 15.302489),
    "Piaseczno": const LatLng(52.072096, 21.021935),
    "Piaski (lubelskie)": const LatLng(51.137839, 22.847941),
    "Piastów": const LatLng(52.185515, 20.839780),
    "Piątek": const LatLng(52.069149, 19.466805),
    "Piechowice": const LatLng(50.851341, 15.590842),
    "Piekary Śląskie": const LatLng(50.378778, 18.942303),
    "Piekoszów": const LatLng(50.880689, 20.462188),
    "Pieniężno": const LatLng(54.237210, 20.125846),
    "Pieńsk": const LatLng(51.248402, 15.046211),
    "Pierzchnica": const LatLng(50.698032, 20.752309),
    "Pieszyce": const LatLng(50.716812, 16.587326),
    "Pilawa": const LatLng(51.960637, 21.521067),
    "Pilica": const LatLng(50.470195, 19.659899),
    "Piła": const LatLng(53.154634, 16.746771),
    "Pińczów": const LatLng(50.522312, 20.522847),
    "Pionki": const LatLng(51.477219, 21.454404),
    "Piotrków Trybunalski": const LatLng(51.413373, 19.682286),
    "Piotrków Kujawski": const LatLng(52.549113, 18.496648),
    "Pisz": const LatLng(53.627871, 21.801278),
    "Piszczac": const LatLng(51.980255, 23.375082),
    "Pleszew": const LatLng(51.897822, 17.781706),
    "Płock": const LatLng(52.545619, 19.696771),
    "Płońsk": const LatLng(52.626523, 20.358802),
    "Płoty": const LatLng(53.804733, 15.266011),
    "Pniewy (poznańskie)": const LatLng(52.510400, 16.253290),
    "Pobiedziska": const LatLng(52.479628, 17.275162),
    "Poddębice": const LatLng(51.892652, 18.953257),
    "Podkowa Leśna": const LatLng(52.120469, 20.725577),
    "Polanica-Zdrój": const LatLng(50.402169, 16.508398),
    "Polanów": const LatLng(54.117666, 16.678995),
    "Police": const LatLng(53.559302, 14.565331),
    "Polkowice": const LatLng(51.503994, 16.061207),
    "Połczyn-Zdrój": const LatLng(53.765566, 16.090011),
    "Poniatowa": const LatLng(51.191897, 22.061928),
    "Poniec": const LatLng(51.765607, 16.804367),
    "Prabuty": const LatLng(53.753201, 19.205938),
    "Praszka": const LatLng(51.053340, 18.449680),
    "Prochowice": const LatLng(51.273621, 16.360663),
    "Proszowice": const LatLng(50.190796, 20.285846),
    "Prószków": const LatLng(50.580191, 17.869582),
    "Pruchnik": const LatLng(49.903413, 22.509310),
    "Prudnik": const LatLng(50.319760, 17.571872),
    "Prusice": const LatLng(51.372947, 16.960363),
    "Pruszcz": const LatLng(53.335301, 18.194810),
    "Pruszcz Gdański": const LatLng(54.260785, 18.633540),
    "Pruszków": const LatLng(52.171058, 20.792974),
    "Przasnysz": const LatLng(53.021079, 20.885018),
    "Przecław": const LatLng(50.193598, 21.475189),
    "Przedbórz": const LatLng(51.088352, 19.866082),
    "Przedecz": const LatLng(52.335265, 18.898584),
    "Przemków": const LatLng(51.528587, 15.787404),
    "Przemyśl": const LatLng(49.786594, 22.766725),
    "Przeworsk": const LatLng(50.057165, 22.492227),
    "Przyrów": const LatLng(50.799376, 19.526220),
    "Przysucha": const LatLng(51.357167, 20.625632),
    "Przytyk": const LatLng(51.465440, 20.909227),
    "Pszczyna": const LatLng(49.986588, 18.939835),
    "Puck": const LatLng(54.716917, 18.405044),
    "Puławy": const LatLng(51.419062, 21.970692),
    "Pułtusk": const LatLng(52.705943, 21.083341),
    "Puszczykowo": const LatLng(52.274141, 16.853840),
    "Pyrzyce": const LatLng(53.145517, 14.887133),
    "Pyskowice": const LatLng(50.397757, 18.626876),
    "Pyzdry": const LatLng(52.169254, 17.683862),
    "Raciąż": const LatLng(52.780656, 20.116092),
    "Racibórz": const LatLng(50.089837, 18.220756),
    "Radków (wałbrzyskie)": const LatLng(50.500144, 16.393563),
    "Radłów (tarnowskie)": const LatLng(50.082806, 20.847285),
    "Radom": const LatLng(51.399648, 21.141363),
    "Radomsko": const LatLng(51.069677, 19.432651),
    "Radomyśl Wielki": const LatLng(50.196498, 21.273131),
    "Radoszyce": const LatLng(51.072898, 20.255302),
    "Radymno": const LatLng(49.951777, 22.819059),
    "Radziejów": const LatLng(52.623805, 18.524814),
    "Radzymin": const LatLng(52.419883, 21.177234),
    "Radzyń Chełmiński": const LatLng(53.385580, 18.933877),
    "Radzyń Podlaski": const LatLng(51.780760, 22.616069),
    "Rajgród": const LatLng(53.728566, 22.691281),
    "Rakoniewice": const LatLng(52.140173, 16.268398),
    "Raszków": const LatLng(51.720070, 17.726497),
    "Rawa Mazowiecka": const LatLng(51.763693, 20.248858),
    "Rawicz": const LatLng(51.609529, 16.861725),
    "Recz": const LatLng(53.259983, 15.547615),
    "Reda": const LatLng(54.612332, 18.344303),
    "Rejowiec": const LatLng(51.093635, 23.281340),
    "Resko": const LatLng(53.773104, 15.403422),
    "Reszel": const LatLng(54.051053, 21.145639),
    "Rogoźno": const LatLng(52.755103, 16.984631),
    "Rogóźno": const LatLng(52.753025, 16.991154),
    "Ropczyce": const LatLng(50.053777, 21.607046),
    "Rozprza": const LatLng(51.304926, 19.645784),
    "Różan": const LatLng(52.887817, 21.386482),
    "Ruciane-Nida": const LatLng(53.640097, 21.539423),
    "Ruda Śląska": const LatLng(50.256889, 18.856658),
    "Rumia": const LatLng(54.571882, 18.386802),
    "Rybnik": const LatLng(50.100361, 18.534503),
    "Rychtal": const LatLng(51.146151, 17.848152),
    "Rychwał": const LatLng(52.072124, 18.163783),
    "Rydzyna": const LatLng(51.787425, 16.666507),
    "Ryglice": const LatLng(49.880704, 21.137165),
    "Ryki": const LatLng(51.627671, 21.931844),
    "Rymanów": const LatLng(49.577262, 21.866230),
    "Ryn": const LatLng(53.938916, 21.543196),
    "Rypin": const LatLng(53.066161, 19.412174),
    "Rzepin": const LatLng(52.346108, 14.830034),
    "Rzeszów": const LatLng(50.037621, 21.998386),
    "Rzgów (łódzkie)": const LatLng(51.654663, 19.481804),
    "Sandomierz": const LatLng(50.684280, 21.744897),
    "Sanniki": const LatLng(52.333189, 19.860305),
    "Sanok": const LatLng(49.560670, 22.200815),
    "Sejny": const LatLng(54.108036, 23.346318),
    "Serock": const LatLng(52.511553, 21.066530),
    "Sędziszów": const LatLng(50.566761, 20.055236),
    "Sędziszów Małopolski": const LatLng(50.072872, 21.692848),
    "Sępopol": const LatLng(54.267831, 21.012048),
    "Sępólno Krajeńskie": const LatLng(53.452931, 17.533765),
    "Sianów": const LatLng(54.227706, 16.293996),
    "Siedlce": const LatLng(52.165532, 22.259958),
    "Siedliszcze": const LatLng(51.196312, 23.162212),
    "Siemianowice Śląskie": const LatLng(50.302584, 19.021735),
    "Siemiatycze": const LatLng(52.426097, 22.863525),
    "Sieniawa": const LatLng(50.178910, 22.606406),
    "Siennica": const LatLng(52.095349, 21.617104),
    "Sienno": const LatLng(51.089810, 21.477252),
    "Sieradz": const LatLng(51.595745, 18.723960),
    "Sieraków": const LatLng(52.649391, 16.068940),
    "Sierpc": const LatLng(52.855087, 19.663679),
    "Siewierz": const LatLng(50.473951, 19.227419),
    "Skalbmierz": const LatLng(50.321192, 20.399652),
    "Skała": const LatLng(50.230808, 19.848896),
    "Skarszewy": const LatLng(54.070298, 18.440113),
    "Skaryszew": const LatLng(51.309236, 21.246044),
    "Skarżysko-Kamienna": const LatLng(51.120159, 20.855038),
    "Skawina": const LatLng(49.975567, 19.822221),
    "Skępe": const LatLng(52.867068, 19.346128),
    "Skierniewice": const LatLng(51.960498, 20.146632),
    "Skoczów": const LatLng(49.798312, 18.789498),
    "Skoki": const LatLng(52.673440, 17.158071),
    "Skórcz": const LatLng(53.795979, 18.522249),
    "Skwierzyna": const LatLng(52.595098, 15.499175),
    "Sława": const LatLng(51.880064, 16.066703),
    "Sławków": const LatLng(50.302086, 19.379248),
    "Sławno (słupskie)": const LatLng(54.360279, 16.674248),
    "Słomniki": const LatLng(50.241354, 20.081958),
    "Słubice (gorzowskie)": const LatLng(52.354300, 14.576989),
    "Słupca": const LatLng(52.289200, 17.869591),
    "Słupsk": const LatLng(54.466860, 17.024993),
    "Sobótka": const LatLng(50.899493, 16.742937),
    "Sochaczew": const LatLng(52.232372, 20.239378),
    "Sochocin": const LatLng(52.692398, 20.469843),
    "Sokołów Małopolski": const LatLng(50.232990, 22.117506),
    "Sokołów Podlaski": const LatLng(52.408989, 22.238306),
    "Sokółka": const LatLng(53.405852, 23.496455),
    "Solec Kujawski": const LatLng(53.081967, 18.225049),
    "Solec nad Wisłą": const LatLng(51.135116, 21.759886),
    "Sompolno": const LatLng(52.388417, 18.498265),
    "Sopot": const LatLng(54.442762, 18.559921),
    "Sosnowiec": const LatLng(50.280075, 19.129983),
    "Sośnicowice": const LatLng(50.269578, 18.525943),
    "Stalowa Wola": const LatLng(50.574096, 22.051418),
    "Starachowice": const LatLng(51.039508, 21.069407),
    "Stargard Szczeciński": const LatLng(53.337305, 15.037706),
    "Starogard Gdański": const LatLng(53.964050, 18.526632),
    "Stary Sącz": const LatLng(49.565548, 20.631702),
    "Staszów": const LatLng(50.565520, 21.168127),
    "Stawiski": const LatLng(53.378624, 22.155323),
    "Stawiszyn": const LatLng(51.918426, 18.111994),
    "Stąporków": const LatLng(51.137956, 20.567501),
    "Stepnica": const LatLng(53.652377, 14.627587),
    "Stęszew": const LatLng(52.284824, 16.703208),
    "Stoczek Łukowski": const LatLng(51.961397, 21.967227),
    "Stopnica": const LatLng(50.438816, 20.931892),
    "Stronie Śląskie": const LatLng(50.292870, 16.874651),
    "Strumień": const LatLng(49.916362, 18.758383),
    "Stryków": const LatLng(51.902447, 19.603977),
    "Strzegom": const LatLng(50.958321, 16.346312),
    "Strzelce Krajeńskie": const LatLng(52.877654, 15.531004),
    "Strzelce Opolskie": const LatLng(50.512156, 18.291288),
    "Strzeleczki": const LatLng(50.459555, 17.849198),
    "Strzelin": const LatLng(50.785466, 17.067699),
    "Strzelno": const LatLng(52.628000, 18.167995),
    "Strzyżów": const LatLng(49.869572, 21.785495),
    "Sucha Beskidzka": const LatLng(49.742072, 19.597433),
    "Suchań": const LatLng(53.280150, 15.322369),
    "Suchedniów": const LatLng(51.052646, 20.830903),
    "Suchowola": const LatLng(53.578534, 23.102721),
    "Sulechów": const LatLng(52.082755, 15.614332),
    "Sulejów": const LatLng(51.355894, 19.880023),
    "Sulejówek": const LatLng(52.246597, 21.279400),
    "Sulęcin": const LatLng(52.445073, 15.115646),
    "Sulmierzyce": const LatLng(51.607606, 17.529500),
    "Sułkowice": const LatLng(49.840493, 19.801264),
    "Supraśl": const LatLng(53.205607, 23.338296),
    "Suraż": const LatLng(52.948340, 22.948846),
    "Susz": const LatLng(53.718231, 19.335348),
    "Suwałki": const LatLng(54.104903, 22.928182),
    "Swarzędz": const LatLng(52.406797, 17.069180),
    "Syców": const LatLng(51.307487, 17.717957),
    "Szadek": const LatLng(51.693611, 18.974679),
    "Szamocin": const LatLng(53.029430, 17.122926),
    "Szamotuły": const LatLng(52.612462, 16.576989),
    "Szczawnica": const LatLng(49.425435, 20.481622),
    "Szczawno-Zdrój": const LatLng(50.809652, 16.248699),
    "Szczebrzeszyn": const LatLng(50.696419, 22.980078),
    "Szczecinek": const LatLng(53.709407, 16.698178),
    "Szczekociny": const LatLng(50.626347, 19.821072),
    "Szczucin": const LatLng(50.308586, 21.074442),
    "Szczuczyn": const LatLng(53.565006, 22.283576),
    "Szczyrk": const LatLng(49.712369, 19.021131),
    "Szczytno": const LatLng(53.565571, 20.990813),
    "Szepietowo": const LatLng(52.869286, 22.540561),
    "Szklarska Poręba": const LatLng(50.826929, 15.522139),
    "Szlichtyngowa": const LatLng(51.711321, 16.241968),
    "Szprotawa": const LatLng(51.564528, 15.531096),
    "Sztum": const LatLng(53.922214, 19.030022),
    "Szubin": const LatLng(53.008746, 17.736320),
    "Szydłowiec": const LatLng(51.226785, 20.857129),
    "Szydłów": const LatLng(50.592844, 21.003392),
    "Ścinawa": const LatLng(51.413066, 16.426023),
    "Ślesin": const LatLng(52.374328, 18.304404),
    "Śmigiel": const LatLng(52.012819, 16.521761),
    "Śrem": const LatLng(52.088498, 17.017792),
    "Środa Śląska": const LatLng(51.165889, 16.592653),
    "Środa Wielkopolska": const LatLng(52.233566, 17.275702),
    "Świątniki Górne": const LatLng(49.933755, 19.951513),
    "Świdnica (wałbrzyskie)": const LatLng(50.848079, 16.490239),
    "Świdnik": const LatLng(51.218856, 22.688712),
    "Świdwin": const LatLng(53.777933, 15.775519),
    "Świebodzice": const LatLng(50.862680, 16.323553),
    "Świebodzin": const LatLng(52.247891, 15.535576),
    "Świecie": const LatLng(53.410098, 18.436748),
    "Świeradów-Zdrój": const LatLng(50.907326, 15.338430),
    "Świętochłowice": const LatLng(50.298397, 18.905584),
    "Świnoujście": const LatLng(53.912323, 14.242984),
    "Tarczyn": const LatLng(51.983449, 20.833317),
    "Tarnobrzeg": const LatLng(50.577190, 21.683628),
    "Tarnogród": const LatLng(50.362175, 22.743703),
    "Tarnowskie Góry": const LatLng(50.442427, 18.851811),
    "Tarnów": const LatLng(50.015361, 20.981927),
    "Tczew": const LatLng(54.094233, 18.778520),
    "Terespol": const LatLng(52.074211, 23.607133),
    "Tolkmicko": const LatLng(54.321194, 19.526555),
    "Tomaszów Lubelski": const LatLng(50.449348, 23.417486),
    "Tomaszów Mazowiecki": const LatLng(51.534366, 20.008922),
    "Toruń": const LatLng(53.015284, 18.587370),
    "Torzym ": const LatLng(52.314473, 15.075394),
    "Toszek": const LatLng(50.454615, 18.521280),
    "Trzcianka": const LatLng(53.041852, 16.456607),
    "Trzcińsko-Zdrój": const LatLng(52.966923, 14.606355),
    "Trzebiatów": const LatLng(54.060399, 15.262856),
    "Trzebinia": const LatLng(50.167093, 19.454932),
    "Trzebnica": const LatLng(51.309570, 17.063116),
    "Trzemeszno": const LatLng(52.560849, 17.820332),
    "Tuchola": const LatLng(53.585384, 17.861321),
    "Tuchów": const LatLng(49.893582, 21.051211),
    "Tuczno": const LatLng(53.194757, 16.152294),
    "Tuliszków": const LatLng(52.076128, 18.290587),
    "Tułowice": const LatLng(50.594905, 17.650225),
    "Turek": const LatLng(52.015099, 18.498012),
    "Turobin": const LatLng(50.824799, 22.742031),
    "Tuszyn": const LatLng(51.609248, 19.533104),
    "Twardogóra": const LatLng(51.366089, 17.461623),
    "Tychowo ": const LatLng(53.926943, 16.256238),
    "Tychy": const LatLng(50.130873, 18.991894),
    "Tyczyn": const LatLng(49.961801, 22.032608),
    "Tykocin": const LatLng(53.205588, 22.767545),
    "Ujazd (opolskie)": const LatLng(50.389693, 18.348956),
    "Ujście": const LatLng(53.053236, 16.729226),
    "Ulanów": const LatLng(50.489327, 22.265088),
    "Uniejów": const LatLng(51.971210, 18.795838),
    "Urzędów": const LatLng(50.993785, 22.143248),
    "Ustka": const LatLng(54.580014, 16.856345),
    "Ustroń": const LatLng(49.722129, 18.807637),
    "Ustrzyki Dolne": const LatLng(49.430068, 22.587443),
    "Wadowice": const LatLng(49.883690, 19.490142),
    "Wałbrzych": const LatLng(50.781245, 16.281424),
    "Wałcz": const LatLng(53.277105, 16.463342),
    "Warka": const LatLng(51.787589, 21.183164),
    "Warta": const LatLng(51.709738, 18.622303),
    "Wasilków": const LatLng(53.202113, 23.201750),
    "Wąbrzeźno": const LatLng(53.280663, 18.946900),
    "Wąchock": const LatLng(51.075066, 21.012500),
    "Wągrowiec": const LatLng(52.806632, 17.199887),
    "Wąsosz": const LatLng(51.563485, 16.691981),
    "Wejherowo": const LatLng(54.606674, 18.232256),
    "Węgliniec": const LatLng(51.288090, 15.221566),
    "Węgorzewo": const LatLng(54.211614, 21.739648),
    "Węgorzyno": const LatLng(53.540021, 15.558405),
    "Węgrów": const LatLng(52.398192, 22.016598),
    "Wiązów": const LatLng(50.814759, 17.196824),
    "Wielbark": const LatLng(53.401198, 20.938850),
    "Wieleń": const LatLng(52.892572, 16.169301),
    "Wielichowo": const LatLng(52.118404, 16.348898),
    "Wieliczka": const LatLng(49.989179, 20.040262),
    "Wieluń": const LatLng(51.221043, 18.566002),
    "Wieruszów": const LatLng(51.295596, 18.153429),
    "Więcbork": const LatLng(53.356209, 17.488391),
    "Wilamowice": const LatLng(49.917652, 19.150163),
    "Wiskitki": const LatLng(52.084909, 20.383144),
    "Wisła": const LatLng(49.650242, 18.864743),
    "Wiślica": const LatLng(50.348187, 20.673966),
    "Witkowo": const LatLng(52.440286, 17.768635),
    "Witnica": const LatLng(52.673563, 14.890118),
    "Wleń": const LatLng(51.016233, 15.674206),
    "Władysławowo": const LatLng(54.789761, 18.405758),
    "Włocławek": const LatLng(52.654314, 19.067352),
    "Włodawa": const LatLng(51.549926, 23.551548),
    "Włodowice": const LatLng(50.554960, 19.451438),
    "Włoszczowa": const LatLng(50.852063, 19.960562),
    "Wodzisław": const LatLng(50.520487, 20.196563),
    "Wodzisław Śląski": const LatLng(50.006035, 18.444094),
    "Wojcieszów": const LatLng(50.953865, 15.920572),
    "Wojnicz": const LatLng(49.957911, 20.835522),
    "Wolbórz": const LatLng(51.500455, 19.831602),
    "Wolbrom": const LatLng(50.381253, 19.758772),
    "Wolin": const LatLng(53.843590, 14.613682),
    "Wolsztyn": const LatLng(52.113257, 16.110788),
    "Wołczyn": const LatLng(51.019842, 18.047198),
    "Wołomin": const LatLng(52.341013, 21.242671),
    "Wołów": const LatLng(51.340170, 16.639855),
    "Woźniki": const LatLng(50.585170, 19.054234),
    "Wronki": const LatLng(52.709492, 16.380965),
    "Września": const LatLng(52.325131, 17.564652),
    "Wschowa": const LatLng(51.808031, 16.315949),
    "Wyrzysk": const LatLng(53.154028, 17.265746),
    "Wysoka": const LatLng(53.180356, 17.077571),
    "Wysokie Mazowieckie": const LatLng(52.917250, 22.506369),
    "Wyszogród": const LatLng(52.391113, 20.186045),
    "Wyśmierzyce": const LatLng(51.624957, 20.817866),
    "Zabłudów": const LatLng(53.016156, 23.335902),
    "Zabrze": const LatLng(50.302379, 18.783833),
    "Zagórów": const LatLng(52.167112, 17.893186),
    "Zagórz": const LatLng(49.509568, 22.262128),
    "Zakliczyn": const LatLng(49.853894, 20.809343),
    "Zaklików": const LatLng(50.756653, 22.100211),
    "Zakopane": const LatLng(49.298912, 19.948693),
    "Zakroczym": const LatLng(52.435825, 20.612153),
    "Zalewo": const LatLng(53.846039, 19.605261),
    "Zambrów": const LatLng(52.983556, 22.245229),
    "Zamość": const LatLng(50.719354, 23.252584),
    "Zator": const LatLng(49.992765, 19.430380),
    "Zawadzkie": const LatLng(50.605404, 18.483522),
    "Zawichost": const LatLng(50.807449, 21.856496),
    "Zawidów": const LatLng(51.026529, 15.061702),
    "Zawiercie": const LatLng(50.489380, 19.420326),
    "Ząbki": const LatLng(52.288043, 21.108892),
    "Ząbkowice Śląskie": const LatLng(50.590641, 16.814097),
    "Zbąszynek": const LatLng(52.243628, 15.816078),
    "Zbąszyń": const LatLng(52.252876, 15.920733),
    "Zduńska Wola": const LatLng(51.599965, 18.938673),
    "Zdzieszowice": const LatLng(50.423260, 18.123407),
    "Zelów": const LatLng(51.467154, 19.217094),
    "Zgierz": const LatLng(51.862800, 19.403855),
    "Zgorzelec": const LatLng(51.150282, 15.007791),
    "Zielona Góra": const LatLng(51.945439, 15.508604),
    "Zielonka": const LatLng(52.308599, 21.152057),
    "Ziębice": const LatLng(50.599908, 17.039745),
    "Złocieniec": const LatLng(53.533972, 16.010190),
    "Złoczew": const LatLng(51.415063, 18.602574),
    "Złotoryja": const LatLng(51.124844, 15.919216),
    "Złotów": const LatLng(53.361154, 17.038307),
    "Złoty Stok": const LatLng(50.443559, 16.874524),
    "Zwierzyniec": const LatLng(50.614163, 22.970516),
    "Zwoleń": const LatLng(51.356843, 21.584227),
    "Żabno": const LatLng(50.134190, 20.885051),
    "Żagań": const LatLng(51.616111, 15.309491),
    "Żarki": const LatLng(50.626050, 19.364445),
    "Żarnów": const LatLng(51.246974, 20.172317),
    "Żarów": const LatLng(50.940688, 16.489683),
    "Żary": const LatLng(51.638328, 15.136501),
    "Żelechów": const LatLng(51.808902, 21.894900),
    "Żerków": const LatLng(52.068272, 17.562396),
    "Żmigród": const LatLng(51.468231, 16.904398),
    "Żnin": const LatLng(52.848756, 17.728755),
    "Żory": const LatLng(50.043651, 18.692879),
    "Żukowo": const LatLng(54.344732, 18.360858),
    "Żuromin": const LatLng(53.066860, 19.907411),
    "Żychlin": const LatLng(52.243706, 19.622278),
    "Żyrardów": const LatLng(52.054380, 20.441947),
    "Żywiec": const LatLng(49.689778, 19.200366),
  };

  @override
  void initState() {
    super.initState();
    _fetchAirQualityData("Warszawa");
  }

  @override
  void dispose() {
    super.dispose();
  }

  Future<void> _fetchAirQualityData(String city) async {
    if (!_cities.containsKey(city)) {
      _showError("Nie znaleziono danych dla podanej lokalizacji.");
      return;
    }

    final position = _cities[city];
    final response = await http.get(Uri.parse(
        'https://api.waqi.info/feed/geo:${position!.latitude};${position.longitude}/?token=8d120e484254e19c9957a438faec594522926208'));

    if (response.statusCode == 200) {
      final data = json.decode(response.body);
      if (data['status'] == 'ok') {
        final aqi = data['data']['aqi'];
        final cityName = data['data']['city']['name'];
        final description = _getAQIDescription(aqi);
        _addMarker(cityName, position, aqi, description);
      } else {
        _showError("Nie znaleziono danych dla podanej lokalizacji.");
      }
    } else {
      throw Exception('Failed to load air quality data');
    }
  }

  void _addMarker(String cityName, LatLng position, int aqi,
      [String description = ""]) {
    setState(() {
      _markers.clear(); // Czyścimy poprzednie markery
      _markers.add(
        Marker(
          markerId: MarkerId(cityName),
          position: position,
          infoWindow: InfoWindow(
            title: cityName,
            snippet: 'AQI: $aqi\n$description',
          ),
        ),
      );
      _selectedCity = cityName;
      _selectedAQI = aqi;
      _selectedDescription = description;

      if (_mapController != null) {
        _mapController!.animateCamera(CameraUpdate.newLatLng(position));
      }
    });
  }

  String _getAQIDescription(int aqi) {
    if (aqi <= 50) {
      return "Dobra jakość powietrza.";
    } else if (aqi <= 100) {
      return "Umiarkowana jakość powietrza.";
    } else if (aqi <= 150) {
      return "Zła jakość powietrza.";
    } else if (aqi <= 200) {
      return "Bardzo zła jakość powietrza.";
    } else {
      return "Niebezpieczna jakość powietrza.";
    }
  }

  void _showError(String message) {
    showDialog(
      context: context,
      builder: (context) {
        return AlertDialog(
          title: const Text("Błąd"),
          content: Text(message),
          actions: [
            TextButton(
              onPressed: () => Navigator.of(context).pop(),
              child: const Text("OK"),
            ),
          ],
        );
      },
    );
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: Stack(
        children: [
          GoogleMap(
            onMapCreated: (GoogleMapController controller) {
              _mapController = controller;
            },
            initialCameraPosition: const CameraPosition(
              target: _defaultLocation,
              zoom: 10,
            ),
            markers: _markers,
            zoomControlsEnabled: false,
          ),
          Positioned(
            top: 16,
            left: 16,
            right: 16,
            child: TextField(
              autofocus: false,
              controller: _searchController,
              onChanged: _filterCities,
              decoration: InputDecoration(
                filled: true,
                fillColor: Colors.white,
                hintText: "Wyszukaj...",
                border: OutlineInputBorder(
                  borderRadius: BorderRadius.circular(30),
                ),
                prefixIcon: const Icon(Icons.search),
              ),
            ),
          ),
          if (_filteredCities.isNotEmpty)
            Positioned(
              top: 100,
              left: 16,
              right: 16,
              child: GestureDetector(
                onTap: () {
                  // FocusScope.of(context)
                  //     .requestFocus(_focusNode);
                },
                child: AbsorbPointer(
                  child: TextField(
                    autofocus: false,
                    controller: _searchController,
                    onChanged: _filterCities,
                    decoration: InputDecoration(
                      filled: true,
                      fillColor: Colors.white,
                      hintText: "Wyszukaj...",
                      border: OutlineInputBorder(
                        borderRadius: BorderRadius.circular(30),
                      ),
                      prefixIcon: const Icon(Icons.search),
                    ),
                  ),
                ),
              ),
            ),
          if (_filteredCities.isNotEmpty)
            Positioned(
              top: 80,
              left: 16,
              right: 16,
              child: Container(
                height: 200,
                decoration: BoxDecoration(
                  color: Colors.white,
                  border: Border.all(color: Colors.grey),
                  borderRadius: BorderRadius.circular(15),
                ),
                child: ListView.builder(
                  itemCount: _filteredCities.length,
                  itemBuilder: (context, index) {
                    return ListTile(
                      leading: const Icon(Icons.search),
                      title: Text(_filteredCities[index]),
                      onTap: () {
                        _fetchAirQualityData(_filteredCities[index]);
                        FocusScope.of(context).unfocus(); // Ukrycie klawiatury
                        setState(() {
                          _filteredCities.clear();
                        });
                      },
                    );
                  },
                ),
              ),
            ),
          if (_selectedCity != null &&
              _selectedAQI != null &&
              _filteredCities.isEmpty)
            Positioned(
              bottom: 16,
              left: 16,
              right: 16,
              child: Container(
                padding: const EdgeInsets.all(16.0),
                decoration: BoxDecoration(
                  color: Colors.white,
                  border: Border.all(color: Colors.grey),
                  borderRadius: BorderRadius.circular(15),
                ),
                child: Row(
                  children: [
                    const Icon(Icons.location_on, size: 24),
                    const SizedBox(width: 8),
                    Expanded(
                      child: Column(
                        crossAxisAlignment: CrossAxisAlignment.start,
                        children: [
                          Text("Wybrane miejce: $_selectedCity",
                              style: const TextStyle(
                                  fontSize: 18, fontWeight: FontWeight.bold)),
                          Text("AQI: $_selectedAQI",
                              style: const TextStyle(fontSize: 16)),
                          Text("Opis: $_selectedDescription",
                              style: const TextStyle(fontSize: 16)),
                        ],
                      ),
                    ),
                  ],
                ),
              ),
            ),
        ],
      ),
    );
  }

  void _filterCities(String query) {
    if (query.isEmpty) {
      setState(() {
        _filteredCities.clear();
      });
    } else {
      setState(() {
        _filteredCities = _cities.keys
            .where((city) => city.toLowerCase().contains(query.toLowerCase()))
            .toList();
      });
    }
  }
}
